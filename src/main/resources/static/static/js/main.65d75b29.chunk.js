(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{136:function(t,n,e){},137:function(t,n,e){},241:function(t,n,e){"use strict";e.r(n);var i=e(0),r=e.n(i),o=e(26),c=e.n(o),s=(e(136),e(137),e(39)),a=e(127),u=e(27),p=e(54),l={customerMode:!0,authenticationHeader:void 0,userAuthority:void 0},d=Object(p.b)({name:"app",initialState:l,reducers:{toggleAppointmentMode:function(t){t.customerMode=!t.customerMode},postAppointment:function(t){},decrement:function(t){},setAuthenticationHeader:function(t,n){var e=n.payload,i=e.header,r=e.authority;t.authenticationHeader=i,t.userAuthority=r},unsetAuthenticationHeader:function(t,n){t.authenticationHeader=void 0,t.userAuthority=void 0}}}),j=d.actions,g=j.toggleAppointmentMode,f=(j.decrement,j.setAuthenticationHeader),m=j.unsetAuthenticationHeader,b=function(t){return t.app.authenticationHeader},h=d.reducer,O=u.c,v={gettingSpecialists:!1,gettingSpecialistsError:void 0,specialists:void 0,postingAppointment:!1,appointmentError:void 0,appointmentInfo:void 0,unregisteringAppointment:!1,unregisteringAppointmentError:void 0},x=Object(p.b)({name:"customer",initialState:v,reducers:{gettingSpecialists:function(t){t.gettingSpecialists=!0},specialistsSuccess:function(t,n){t.gettingSpecialists=!1,t.specialists=n.payload},specialistsError:function(t,n){t.gettingSpecialists=!1,t.appointmentError=n.payload},postingAppointment:function(t){t.postingAppointment=!0},postingAppointmentSuccess:function(t,n){t.postingAppointment=!1,t.appointmentInfo=n.payload},postingAppointmentError:function(t,n){t.postingAppointment=!1,t.appointmentError=n.payload},unregistering:function(t){t.unregisteringAppointment=!0},unregisteringSuccess:function(t){t.appointmentInfo=void 0,t.unregisteringAppointment=!1,t.unregisteringAppointmentError=void 0},unregisteringError:function(t,n){t.unregisteringAppointment=!1,t.unregisteringAppointmentError=n.payload}}}),A=x.actions,S=(A.postingAppointment,A.postingAppointmentSuccess),E=A.postingAppointmentError,y=(A.gettingSpecialists,A.specialistsSuccess),I=A.specialistsError,w=(A.unregistering,A.unregisteringSuccess),C=A.unregisteringError,k=x.reducer,F=e(36),H=e(6);function z(t){var n=t.appointmentInfo,e=t.unregisterAppointment,i=t.unregistering,r=n.appointmentId,o=n.message,c=n.specialist;return Object(H.jsxs)("div",{children:[Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{children:"Vizitas:"}),"Nr. ".concat(r," pas ").concat(c.specialistInfo)]}),Object(H.jsx)("div",{children:Object(H.jsxs)(H.Fragment,{children:["Informacija:",Object(H.jsx)("p",{children:o}),Object(H.jsx)(a.a,{onClick:e,loading:i,children:"at\u0161aukti"})]})})]})}var M=e(245),T=e(246);function L(t){var n=t.registerAppointment,e=t.registering,i=(t.registeringError,t.specialists);return Object(H.jsxs)("div",{children:[i?Object(H.jsx)(H.Fragment,{children:i.length&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{children:"Dirbantys specialistai:"}),Object(H.jsx)(M.b,{itemLayout:"vertical",size:"large",dataSource:i,renderItem:function(t){return Object(H.jsx)(M.b.Item,{children:Object(H.jsxs)(T.a,{title:t.specialistId,style:{border:"5px solid green"},children:[Object(H.jsx)(H.Fragment,{children:t.specialistType}),Object(H.jsxs)(a.a,{onClick:function(){return n(t.specialistId)},loading:e,children:["Registruotis ",t.specialistId]})]})})}})]})}):"Laukiama duomen\u0173",0===i.length&&"\u0160iuo metu n\u0117ra dirban\u010di\u0173 specialist\u0173"]})}function N(t){Object(s.a)(t);var n=O((function(t){return t.customer})),e=n.gettingSpecialists,r=n.gettingSpecialistsError,o=n.specialists,c=n.postingAppointment,a=n.appointmentError,p=n.appointmentInfo,l=n.unregisteringAppointment,d=n.unregisteringAppointmentError,j=Object(u.b)();function g(t){j(S(t)),m()}var f=null;function m(){console.log("closing specialists"),f&&f.close()}function b(){console.log("closing appointments"),h&&h.close()}Object(i.useEffect)((function(){return p?m():(f=Object(F.d)((function(t){return j(y(t))}),(function(t){return j(I(t))}))).addEventListener("close",(function(){var t;return null===(t=f)||void 0===t?void 0:t.close()})),function(){m()}}),[p]);var h=null;return Object(i.useEffect)((function(){if(p)return h=Object(F.e)(p.appointmentId,g),function(){b()}}),[p]),Object(i.useEffect)((function(){return function(){b(),m()}}),[p]),Object(H.jsxs)("div",{children:[o&&!p&&Object(H.jsx)(L,{registerAppointment:function(t){Object(F.f)(t,(function(t){return j(S(t))}),(function(t){return j(E(t))}))},registering:c,registeringError:a,loadingSpecialists:e,loadingSpecialistsError:r,specialists:o}),p&&Object(H.jsx)(z,{appointmentInfo:p,unregisterAppointment:function(){return t=p.appointmentId,void Object(F.g)(t,(function(){return j(w())}),(function(t){return j(C(t))}));var t},unregistering:l,unregisteringError:d})]})}var B=e(128);function J(t){Object(s.a)(t);var n=Object(i.useState)(void 0),e=Object(B.a)(n,2),r=e[0],o=e[1];function c(t){return o(t)}return console.log(r),Object(i.useEffect)((function(){var t=Object(F.c)(c);return function(){console.log("closing appmt"),t.close()}}),[]),Object(H.jsx)("div",{children:r?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{children:"Vizitai:"}),r.length&&r.map((function(t){return Object(H.jsx)("div",{children:Object(H.jsx)("p",{children:"".concat(t.appointmentId," ").concat(t.started?"vyksta":"laukia"," ")},t.appointmentId)},t.appointmentId)}))]}):"Laukiama duomen\u0173"})}var V=e(64),q=e(244),P=e(247),D={labelCol:{span:8},wrapperCol:{span:16}},G={wrapperCol:{offset:8,span:16}};function R(t){var n=t.onSubmit;return Object(H.jsxs)(q.a,Object(V.a)(Object(V.a)({},D),{},{name:"basic",initialValues:{remember:!0},onFinish:n,children:[Object(H.jsx)(q.a.Item,{label:"Vartotojo vardas",name:"username",rules:[{required:!0,message:"Vartotojo vardas b\u016btinas!"}],children:Object(H.jsx)(P.a,{})}),Object(H.jsx)(q.a.Item,{label:"Slapta\u017eodis",name:"password",rules:[{required:!0,message:"Slapta\u017eodis b\u016btinas!"}],children:Object(H.jsx)(P.a.Password,{})}),Object(H.jsx)(q.a.Item,Object(V.a)(Object(V.a)({},G),{},{children:Object(H.jsx)(a.a,{type:"primary",htmlType:"submit",children:"Prisijungti"})}))]}))}function K(t){Object(s.a)(t);var n=Object(u.b)();return Object(H.jsx)(a.a,{onClick:function(){n(m()),Object(F.b)()},children:"Atsijungti"})}function Q(t){Object(s.a)(t);var n=!!Object(u.c)(b),e=Object(u.b)(),i=function(t,n){return e(f({header:t,authority:n}))};return Object(H.jsxs)("div",{children:[!n&&Object(H.jsx)(R,{onSubmit:function(t){Object(F.a)(t,i)}}),n&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(J,{}),Object(H.jsx)(K,{})]})]})}function U(t){Object(s.a)(t);var n=O((function(t){return t})),e=n.app.customerMode,i=n.customer.appointmentInfo,r=Object(u.b)();return Object(H.jsxs)("div",{children:[!i&&Object(H.jsx)(a.a,{type:"primary",onClick:function(){r(g())},children:e?"Darbuotojams":"Gr\u012f\u017eti"}),!e&&Object(H.jsx)(Q,{}),e&&Object(H.jsx)(N,{})]})}var W=e(124),X=Object(p.a)({reducer:{app:h,customer:k},middleware:function(t){return t({serializableCheck:!1})}});var Y=function(){return Object(H.jsx)("div",{className:"App",children:Object(H.jsx)(W.ErrorBoundary,{FallbackComponent:function(){return Object(H.jsx)("p",{children:"whoops"})},children:Object(H.jsx)(u.a,{store:X,children:Object(H.jsx)(U,{})})})})},Z=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,248)).then((function(n){var e=n.getCLS,i=n.getFID,r=n.getFCP,o=n.getLCP,c=n.getTTFB;e(t),i(t),r(t),o(t),c(t)}))};c.a.render(Object(H.jsx)(r.a.StrictMode,{children:Object(H.jsx)(Y,{})}),document.getElementById("root")),Z()},36:function(t,n,e){"use strict";(function(t){e.d(n,"f",(function(){return o})),e.d(n,"e",(function(){return c})),e.d(n,"g",(function(){return s})),e.d(n,"a",(function(){return a})),e.d(n,"c",(function(){return u})),e.d(n,"d",(function(){return p})),e.d(n,"b",(function(){return l}));var i=e(59),r=e.n(i);function o(t,n,e){return r.a.post("http://localhost:8080/appointments",{specialistId:t},{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){var e=t.data;n(e)})).catch((function(t){e(t)}))}function c(t,n){var e=new EventSource("http://127.0.0.1:8080/appointments/".concat(t));return e.onerror=function(){2===e.readyState&&setTimeout(c,300)},e.onmessage=function(t){console.log("appointment",t);var e=JSON.parse(t.data);n(e)},e}function s(t,n,e){return r.a.patch("http://localhost:8080/appointments/".concat(t),{status:"unregister"},{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){n()})).catch((function(t){e(t)}))}function a(n,e){var i=function(n){var e=n.username,i=n.password,r=e+":"+i;return"Basic "+t.from(r).toString("base64")}(n);return r.a.get("http://localhost:8080/authorities",{headers:{"Access-Control-Allow-Origin":"*",authorization:i}}).then((function(t){var n,o=t.data;console.log(o),e(i,o[0].authority),n=i,r.a.interceptors.request.use((function(t){return t.headers.authorization=n,t}))})).catch((function(t){console.log(t)}))}function u(t){var n=new EventSource("http://127.0.0.1:8080/appointments");return n.onerror=function(){2===n.readyState&&setTimeout(u,300)},n.onmessage=function(n){var e=JSON.parse(n.data);t(e)},n}function p(t,n){var e=new EventSource("http://127.0.0.1:8080/specialists");return e.onerror=function(){n(new Error("Nepavyko gauti specialist\u0173")),2===e.readyState&&setTimeout(p,300)},e.onmessage=function(n){var e=JSON.parse(n.data);t(e)},e}function l(){r.a.interceptors.request.use((function(t){return t.headers.authorization=null,t}))}}).call(this,e(145).Buffer)}},[[241,1,2]]]);
//# sourceMappingURL=main.65d75b29.chunk.js.map